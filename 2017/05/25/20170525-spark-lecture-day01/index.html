<!DOCTYPE html>
<html lang=Ko>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Scala 훑어보기 실습 (SparkIntro/0. Scala Programming) zeppelin을 통해 스칼라 코드를 간단하게 실행해보자. (스칼라 관련 예제 notebook을 import 하여 실행해봄) Tip. 실행 후 소스코드를 더블클릭 해보면 수정이 가능함    Spark Overview MapReduce 오버뷰, Spark와 MapReduce">
<meta name="keywords" content="Spark">
<meta property="og:type" content="article">
<meta property="og:title" content="스파크 강의 노트 Day 1">
<meta property="og:url" content="http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/index.html">
<meta property="og:site_name" content="Icednut&#39;s Note">
<meta property="og:description" content="Scala 훑어보기 실습 (SparkIntro/0. Scala Programming) zeppelin을 통해 스칼라 코드를 간단하게 실행해보자. (스칼라 관련 예제 notebook을 import 하여 실행해봄) Tip. 실행 후 소스코드를 더블클릭 해보면 수정이 가능함    Spark Overview MapReduce 오버뷰, Spark와 MapReduce">
<meta property="og:locale" content="Korean">
<meta property="og:updated_time" content="2018-09-29T06:00:58.101Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="스파크 강의 노트 Day 1">
<meta name="twitter:description" content="Scala 훑어보기 실습 (SparkIntro/0. Scala Programming) zeppelin을 통해 스칼라 코드를 간단하게 실행해보자. (스칼라 관련 예제 notebook을 import 하여 실행해봄) Tip. 실행 후 소스코드를 더블클릭 해보면 수정이 가능함    Spark Overview MapReduce 오버뷰, Spark와 MapReduce">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>스파크 강의 노트 Day 1</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/05/26/20170526-spark-lecture-day02/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2017/04/23/20170423-spring-camp-day02/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&text=스파크 강의 노트 Day 1"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&is_video=false&description=스파크 강의 노트 Day 1"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=스파크 강의 노트 Day 1&body=Check out this article: http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&name=스파크 강의 노트 Day 1&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Scala-훑어보기-실습-SparkIntro-0-Scala-Programming"><span class="toc-number">1.</span> <span class="toc-text">Scala 훑어보기 실습 (SparkIntro/0. Scala Programming)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Overview"><span class="toc-number">2.</span> <span class="toc-text">Spark Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-실행-환경-구축하기"><span class="toc-number">3.</span> <span class="toc-text">Spark 실행 환경 구축하기</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-실습-SparkIntro-1-RDD-Programming"><span class="toc-number">4.</span> <span class="toc-text">Spark 실습 (SparkIntro/1. RDD Programming)</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#Spark-Architecture"><span class="toc-number"></span> <span class="toc-text">Spark Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Review"><span class="toc-number">1.</span> <span class="toc-text">Review</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#동작-방식-ETL-기반-읽고-처리하고-저장"><span class="toc-number">2.</span> <span class="toc-text">동작 방식 (ETL 기반, 읽고 처리하고 저장)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Job"><span class="toc-number">3.</span> <span class="toc-text">Spark Job</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Runtime-Architecture"><span class="toc-number">4.</span> <span class="toc-text">Spark Runtime Architecture</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Deployment"><span class="toc-number">5.</span> <span class="toc-text">Spark Deployment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-on-cloud"><span class="toc-number">6.</span> <span class="toc-text">Spark on cloud</span></a></li></ol>
    </li></div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        스파크 강의 노트 Day 1
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">Icednut's Note</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-05-25T00:02:31.000Z" itemprop="datePublished">2017-05-25</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Spark/">Spark</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Scala-훑어보기-실습-SparkIntro-0-Scala-Programming"><a href="#Scala-훑어보기-실습-SparkIntro-0-Scala-Programming" class="headerlink" title="Scala 훑어보기 실습 (SparkIntro/0. Scala Programming)"></a>Scala 훑어보기 실습 (SparkIntro/0. Scala Programming)</h2><ul>
<li>zeppelin을 통해 스칼라 코드를 간단하게 실행해보자. (스칼라 관련 예제 notebook을 import 하여 실행해봄)<ul>
<li>Tip. 실행 후 소스코드를 더블클릭 해보면 수정이 가능함</li>
</ul>
</li>
</ul>
<h2 id="Spark-Overview"><a href="#Spark-Overview" class="headerlink" title="Spark Overview"></a>Spark Overview</h2><ul>
<li>MapReduce 오버뷰, Spark와 MapReduce를 비교하여 뭐가 좋은지 </li>
<li>Spark로 할 수 있는게 뭐가 있을까? ETL, Crawling, Statistics</li>
<li>Spark로 할 수 없는건? 시각화, 데이터 수집</li>
<li>결국 Spark를 쓰는 목적은 데이터를 저장소에서 읽어서 가공 후 저장하는 것을 분산처리 방식으로 프레임워크화 된 기술을 쓰기위해서 쓰는 것</li>
</ul>
<h2 id="Spark-실행-환경-구축하기"><a href="#Spark-실행-환경-구축하기" class="headerlink" title="Spark 실행 환경 구축하기"></a>Spark 실행 환경 구축하기</h2><ul>
<li>Spark를 하려면 로컬 머신에서 개발용으로 할 것인지, 여러 머신에서 Clustering해서 분산 처리할 것인지에 따라 다르다.</li>
<li>Local Machine 개발용으로 Spark 환경 구축하기<ul>
<li>크게 두 가지로 나뉘는데, Zeppelin만 설치하거나 Spark-submit을 사용하면 되는데 Zeppelin을 설치하면 Spark &amp; UI, HDFS가 포함되어 있기 때문에 따로 설치할 필요가 없는 반면, Spark-submit을 쓰려면 저장소인 hdfs나 분산처리 매니징 기술인 YARN, 그리고 Spark 실행 모니터링을 하기 위한 Spark UI를 직접 설치해줘야 한다.</li>
</ul>
<ol>
<li>Zeppelin 설치<ul>
<li>Zeppelin 공식 사이트에서 제플린 다운로드</li>
<li>zeppelin을 로컬에서 실행하기 위한 설정 진행 (아래 설정파일 참고)</li>
<li>$ZEPPELIN_HOME/bin/zeppelin.sh 실행<figure class="highlight bash"><figcaption><span>$ZEPPELIN_HOME/conf/zeppelin-env.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/Users/1002371/Dev/hadoop-2.8.0</span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/Users/1002371/Dev/spark-2.1.1-bin-hadoop2.7</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>Hadoop(YARN) 설치<ul>
<li>Hadoop 공식 사이트에서 하둡 다운로드</li>
<li>$HADOOP_HOME/etc/haddop/hdfs-site.xml 등등 설정파일에 HDFS 관련 설정 진행하기 (아래 설정 예시 참고)</li>
<li>$HADOOP_HOME/bin/start-all.sh 실행 (YARN과 HDFS 실행됨)<figure class="highlight xml"><figcaption><span>$HADDOP_HOME/etc/hadoop/core-site.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://127.0.0.1:8020/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>NameNode URI<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.teamsk.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.teamsk.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><figcaption><span>$HADDOP_HOME/etc/hadoop/hdfs-site.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/teamsk/Sparklab/hadoop-2.8.0/data/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Comma separated list of paths on the local filesystem of a DataNode where it should store its blocks<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Default block replication. The actual number of replications can be specified when the file is created. The default is used if replication is not specified in create time.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/teamsk/Sparklab/hadoop-2.8.0/data/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Path on the local filesystem where the NameNode stores the namespace and transaction logs persistently.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.webhdfs.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>Spark 설치<ul>
<li>Spark 공식 사이트에서 스파크 다운로드</li>
<li>Spark App 코드 작성 후 jar로 묶기</li>
<li>$SPARK_HOME/bin에서 spark-submit.sh 실행하는데 실행 파라미터로 앞에서 만든 JAR 파일 입력하면 스파크 구동됨<figure class="highlight bash"><figcaption><span>$SPARK_HOME/conf/spark-env.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/Users/1002371/Dev/hadoop-2.8.0/etc/hadoop</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="Spark-실습-SparkIntro-1-RDD-Programming"><a href="#Spark-실습-SparkIntro-1-RDD-Programming" class="headerlink" title="Spark 실습 (SparkIntro/1. RDD Programming)"></a>Spark 실습 (SparkIntro/1. RDD Programming)</h2><ul>
<li>SparkContext를 활용하여 word counting 등 간단한 실습</li>
<li>Spark’s Fault Tolerance: 파티션이 날라가면 계보를 따라 복구 후 다시 해당 파티션만 실행</li>
<li>deterministically recomputable operations -&gt; Lazy Evaluation 개념 (이게 되어야지 fault tolerance가 됨)</li>
</ul>
<h1 id="Spark-Architecture"><a href="#Spark-Architecture" class="headerlink" title="Spark Architecture"></a>Spark Architecture</h1><h2 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h2><ul>
<li>Two Types of Operations - transformation and action</li>
<li>Transaformations are lazy</li>
<li>Transformations are executed when an action is run.</li>
<li>Persist and cache</li>
</ul>
<h2 id="동작-방식-ETL-기반-읽고-처리하고-저장"><a href="#동작-방식-ETL-기반-읽고-처리하고-저장" class="headerlink" title="동작 방식 (ETL 기반, 읽고 처리하고 저장)"></a>동작 방식 (ETL 기반, 읽고 처리하고 저장)</h2><ul>
<li>hdfs 읽기 -&gt; 필터링 -&gt; 파티션 조정 -&gt; 저장</li>
<li>coalesce(2) // 원하는 데이터만 뽑아낸 뒤 파티션을 정리할 때 사용</li>
<li>늘릴땐 repartition </li>
<li>메모리 이슈가 발생할 땐 job이 죽음 -&gt; 파티션 조정이 필요</li>
</ul>
<h2 id="Spark-Job"><a href="#Spark-Job" class="headerlink" title="Spark Job"></a>Spark Job</h2><ul>
<li>Job: RDD로 계산하는 가장 최소 단위</li>
<li>Stage: 코드가 실행된 파이프라인된 RDD 단위</li>
<li>Task: 스테이지에서 RDD 파티션에 따른 실행 단위</li>
<li>Shuffle</li>
<li>Executor: 분산해서 실행시키는 주체</li>
</ul>
<h2 id="Spark-Runtime-Architecture"><a href="#Spark-Runtime-Architecture" class="headerlink" title="Spark Runtime Architecture"></a>Spark Runtime Architecture</h2><ul>
<li>교육에서는 Spark Shell을 쓸 수도 있지만 Zeppelin을 쓴다.</li>
<li>Zeppelin을 설치하면 스파크 관련 리소스가 생성됨</li>
<li>Spark Shell을 쓰면 SparkContext를 직접 생성해줘야 함</li>
<li>Spark을 클러스터링 하려면 Mesos, YARN을 써야됨</li>
<li>Driver Program, Cluster Manager, Worker</li>
<li>Spark Context를 생성하면서 클러스터를 지정?</li>
</ul>
<h2 id="Spark-Deployment"><a href="#Spark-Deployment" class="headerlink" title="Spark Deployment"></a>Spark Deployment</h2><ul>
<li>분산환경에 Deploy할 때는 Mesos, Apahce YARN을 고려해야 됨</li>
<li>Cluster Manager: 자원을 할당하거나 작업실행을 관리</li>
<li>Spark-repl: spark shell을 띄우지 않아도 spark 코드를 실행시킬 수 있는 환경</li>
<li>Spark Shell 로컬에서 띄우기: 간단한걸 테스트할 때 로컬에서 실행시키는게 좋음</li>
<li>Spark 코드 작성 -&gt; Jar로 묶기 -&gt; 클러스터에 배포 (배포할 때 쓰는게 spark-submit)<ul>
<li>Spark 실행 관련 설정은 conf 파일로 쓰거나 spark-submit의 옵션, 코드로 new SparkConf()에 셋팅할 수 있다.</li>
</ul>
</li>
<li>StandAlone 모드: Master가 죽으면 안되기 때문에 Zookeeper를 사용하여 backup master가 실행할 수 있도록 해준다. (Mesos, YARN을 사용하여 클러스터링 할 때는 상관 없음)</li>
<li>Yarn Mode: Resource Manager, Node Manager의 개념으로 동작<ul>
<li>YARN Client Mode: 얀 밖에서 실행할 때 사용 (자원이 많지 않을 때 즉 Driver에서 많은 작업을 할 때 사용, Driver에서 많은 결과물을 전달해야 된다거나 등등..)</li>
<li>YARN Cluster Mode: 클러스터 내에서 리소스 매니저를 지정</li>
</ul>
</li>
<li>Dynamic Resource Allocation on YARN: Application의 Work node에 따라서 서버가 조정. ETL을 밤에 띄울 때 서버가 많이 필요할 시 서버를 동적으로 늘려서 실행하고 싶을 때 사용<ul>
<li>RDD를 날리지 않고 재사용하기 위해 external shuffle plugin을 설치해야됨</li>
<li>executor의 min, max 갯수를 지정하면 work node 내에서 실행되는 스레드 갯수 지정?</li>
</ul>
</li>
<li>Mesos Mode: Mesos는 하둡진영 뿐 아니라 일반 어플리케이션 진영까지 자원관리 가능</li>
<li>Job Server: SparkContext를 Spark 어플리케이션을 실행할 때마다 생성하는게 아니라 Job Server에 SparkContext를 생성해서 공유해서 사용 (Production 환경에서 사용)</li>
<li>Hardware sizing<ul>
<li>Storage: HDFS(추천) or local</li>
<li>Local disk: raid 구성 안함, 한 노드당 디스크를 25TB 4-8개를 붙여서 씀?</li>
<li>CPU: 객체 직렬화, 역직렬화 때문에 CPU를 많이 잡아먹음. 한 노드당 8-16 core를 추천</li>
<li>Network: 셔플링이 많을 경우 네트워크 고민 필요. 10GB</li>
<li>Memory: 8GB to hundreds of gigabytes, allocating only at most 75% of the memory.</li>
</ul>
</li>
</ul>
<h2 id="Spark-on-cloud"><a href="#Spark-on-cloud" class="headerlink" title="Spark on cloud"></a>Spark on cloud</h2><ul>
<li>AWS 사용 사례 소개</li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Scala-훑어보기-실습-SparkIntro-0-Scala-Programming"><span class="toc-number">1.</span> <span class="toc-text">Scala 훑어보기 실습 (SparkIntro/0. Scala Programming)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Overview"><span class="toc-number">2.</span> <span class="toc-text">Spark Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-실행-환경-구축하기"><span class="toc-number">3.</span> <span class="toc-text">Spark 실행 환경 구축하기</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-실습-SparkIntro-1-RDD-Programming"><span class="toc-number">4.</span> <span class="toc-text">Spark 실습 (SparkIntro/1. RDD Programming)</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#Spark-Architecture"><span class="toc-number"></span> <span class="toc-text">Spark Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Review"><span class="toc-number">1.</span> <span class="toc-text">Review</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#동작-방식-ETL-기반-읽고-처리하고-저장"><span class="toc-number">2.</span> <span class="toc-text">동작 방식 (ETL 기반, 읽고 처리하고 저장)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Job"><span class="toc-number">3.</span> <span class="toc-text">Spark Job</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Runtime-Architecture"><span class="toc-number">4.</span> <span class="toc-text">Spark Runtime Architecture</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-Deployment"><span class="toc-number">5.</span> <span class="toc-text">Spark Deployment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spark-on-cloud"><span class="toc-number">6.</span> <span class="toc-text">Spark on cloud</span></a></li></ol>
    </li></div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&text=스파크 강의 노트 Day 1"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&is_video=false&description=스파크 강의 노트 Day 1"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=스파크 강의 노트 Day 1&body=Check out this article: http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&title=스파크 강의 노트 Day 1"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://icednut.github.io/2017/05/25/20170525-spark-lecture-day01/&name=스파크 강의 노트 Day 1&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Icednut
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'icednut';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


