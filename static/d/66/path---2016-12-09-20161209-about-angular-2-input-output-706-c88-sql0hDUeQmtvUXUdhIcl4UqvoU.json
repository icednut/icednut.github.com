{"data":{"site":{"siteMetadata":{"title":"Icednut's Notes","author":"Will Lee","siteUrl":"https://icednut.github.io"}},"markdownRemark":{"id":"907d073d-8614-5632-a697-7ac2f4f360ea","excerpt":"\n문제Angular 2 기반의 프로젝트에서 위와 같은 컴포넌트 구성일 경우 메뉴1, 2를 클릭할 때마다 빨간색 네모 영역에 메뉴의 서브타이틀을 표시하고 싶을 경우 Angular 2에서는 어떻게 풀 수 있을까?화면에 보이는 바와 같이 상단에 툴바가 있고, router…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54f9642c95564c0e6444ab93ae9e70af/6f075/sample_app.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.27438370846731%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQ4y62R3UoCQRTHJSjoDXqHXqGHEBfyIukZfIAMulbxwrcpL8pa1/xI3DVYiZT82hB3NVw/dmfOnGZ2RRCDVusPPw4758yPnZlQiKeuPJ1VK4/nWrkSUVVVqmuapDebUlPXpXKlItVqtR/R+Fyj8So1NS3yUq1G7x8eToTv8E2tPU/GffzsdLDT72O71UJrPEZ7PkfTNHEymWwx5n3DMLDb7aDe7+HXdIp3t7dRITxutdvKbOGgORgQO5eDaakEM1mG2ccHOACwXCxhudzGtm0YDodgWJZLCMFc7i7mCXvdbpECoG1ZFBoNBu/vjOo6o6bJXABGXJfxDWtc4n9TSpnjOKJPkCefz194woFhFMWCQwgVleFOEeOeUFEUX2hZVtFvMcr4n65hLAginrBQKPhCfvFF38foqu5CMGHg8wYR7nSBvwnZftkU8kdRVkKXF9gDZ+OVR6NRFf8hsixfCuFRMpmMZTKZm1QqdZVOpxO8BkbM8/2JbDZ7HY/HT0PhcDi0ysEf8fINIhd/5ouy22EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sample app\"\n        title=\"\"\n        src=\"/static/54f9642c95564c0e6444ab93ae9e70af/b9e4f/sample_app.png\"\n        srcset=\"/static/54f9642c95564c0e6444ab93ae9e70af/cf440/sample_app.png 148w,\n/static/54f9642c95564c0e6444ab93ae9e70af/d2d38/sample_app.png 295w,\n/static/54f9642c95564c0e6444ab93ae9e70af/b9e4f/sample_app.png 590w,\n/static/54f9642c95564c0e6444ab93ae9e70af/f9b6a/sample_app.png 885w,\n/static/54f9642c95564c0e6444ab93ae9e70af/2d849/sample_app.png 1180w,\n/static/54f9642c95564c0e6444ab93ae9e70af/bbefa/sample_app.png 1770w,\n/static/54f9642c95564c0e6444ab93ae9e70af/6f075/sample_app.png 1866w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<br/></p>\n<h2>문제</h2>\n<!-- {% codeblock app.component.html lang:html %} -->\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>my-toolbar</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>my-toolbar</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-outlet</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>router-outlet</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Angular 2 기반의 프로젝트에서 위와 같은 컴포넌트 구성일 경우 메뉴1, 2를 클릭할 때마다 빨간색 네모 영역에 메뉴의 서브타이틀을 표시하고 싶을 경우 Angular 2에서는 어떻게 풀 수 있을까?<br>\n화면에 보이는 바와 같이 상단에 툴바가 있고, router를 통해 각 메뉴에 해당하는 내용이 출력되는 상황이다.   </p>\n<p>프로젝트 파일 구조는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">.\n├── ...\n├── package.json\n├── src\n│   ├── app\n│   │   ├── app.component.css\n│   │   ├── app.component.html\n│   │   ├── app.component.spec.ts\n│   │   ├── app.component.ts\n│   │   ├── app.module.ts\n│   │   ├── index.ts\n│   │   ├── menu1\n│   │   │   ├── menu1.component.css\n│   │   │   ├── menu1.component.html\n│   │   │   ├── menu1.component.spec.ts\n│   │   │   └── menu1.component.ts\n│   │   ├── menu2\n│   │   │   ├── menu2.component.css\n│   │   │   ├── menu2.component.html\n│   │   │   ├── menu2.component.spec.ts\n│   │   │   └── menu2.component.ts\n│   │   └── my-toolbar\n│   │       ├── my-toolbar.component.css\n│   │       ├── my-toolbar.component.html\n│   │       ├── my-toolbar.component.spec.ts\n│   │       └── my-toolbar.component.ts\n│   ├── ...\n│   ├── index.html\n│   ├── main.ts\n│   ├── styles.css\n│   └── ...\n└── ...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<h2>문제 풀이</h2>\n<p>단순하게 생각하면 메뉴가 바뀔 때마다 my-toolbar 컴포넌트에 서브타이틀 문자열을 넘겨주고 my-toolbar는 넘겨받은 서브타이틀 문자열을 출력하면 될 것 같다.\n그런데 서브타이틀을 어떻게 넘겨줄 것인가? 이 때 사용하는 것이 Data Binding 이다. 여러가지 방법이 있겠지만 일단 지금의 컴포넌트 구성을 깨지 않고 진행을 해보자.<br>\n<br/></p>\n<h4>1. 먼저 my-toolbar에서 서브타이틀을 넘겨 받을 수 있게 Input 데이터 바인딩을 해준다.</h4>\n<!-- {% codeblock app.component.html lang:html %} -->\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>my-toolbar</span> <span class=\"token attr-name\">[currentMenuSubTitle]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>menuSubTitle<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>my-toolbar</span><span class=\"token punctuation\">></span></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-outlet</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>router-outlet</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>my-toolbar 앨리먼트에 쓰여진 어트리뷰트를 살펴보면 currentMenuSubTitle에 대괄호가 둘러쌓여져 있는데 이는 my-toolbar 컴포넌트의 Input 필드를 의미한다.\n위의 상황으로 보면 app.component의 menuSubTitle 이라는 필드를 my-toolbar 컴포넌트의 currentMenuSubTitle 이라는 필드로 데이터 바인딩을 하겠다는 것을\n의미한다. </p>\n<h4>2. 데이터 바인딩이 잘 될 수 있도록 my-toolbar 컴포넌트에도 동일한 이름의 @Input이 붙은 필드를 선언해준다.</h4>\n<!-- {% codeblock my-toolbar.component.ts %} -->\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Input<span class=\"token punctuation\">,</span> Component<span class=\"token punctuation\">,</span> OnInit<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-toolbar'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./my-toolbar.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./my-toolbar.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyToolbarComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n\n  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  currentMenuSubTitle<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>3. app.component에도 menuSubTitle 라는 필드를 선언하고 문자열을 넣어본다.</h4>\n<!-- {% codeblock app.component.ts %} -->\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'app-root'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./app.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./app.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppComponent</span> <span class=\"token punctuation\">{</span>\n  menuSubTitle <span class=\"token operator\">=</span> <span class=\"token string\">'Hello, world!!'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 하면 아래와 같이 서브타이틀이 표시되는 것을 볼 수 있다.</p>\n<!-- <img src=\"/images/20161209-about_angular2_input_output/sample_app_02.png\" title=\"sample app\"/> -->\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3427d8d646cc9896c17d62eabd511d50/99445/sample_app_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQ4y72Ty07CQBRAa+sGbWYjgYVE8PERfoFx7a4LPsD/Mn6GrjQBAhRKWxNME6hVUfughUIf0/FOJSSIJlYTb3LSmc69JzOTuczZ+fVG6/bqpNW+qapiR5AVRZBlWdA0TVBg3Gw2BVEUhXa7vQL9R/PkXk+463ar9Xr9lKGxd3C8da+Iquu+kFf9gQyGQ2IYj2QymZDpdEo8z0vHn3FdF/IMoj8ZZOT7RFXVfi6X22KODvfRYKh3XdcjlmNHtm1j0zQxyPBsNsNBEHwLSPGbZYbTICC6rss8zyOmXK6g0ehZShJM5vN5HEVREoZhEsdxCp1/xXI9jGICYVmWwm1yiKlUqHAEwoRAIibZIxXCbhWWZRGTz+cRTKTFIqbijKwKi8UichwnFSb03B/fH29vTVgoFNaEWeLfhJ30AjEOaUIWaA2tHY/HveUdwpvrkz+G7/sax8GzQQhtQ9tcSJLUgagBjYzUoLbbaDQuofF42n0ssAOUgN1fUlo42HdmOTO2ujtElQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sample app\"\n        title=\"\"\n        src=\"/static/3427d8d646cc9896c17d62eabd511d50/b9e4f/sample_app_02.png\"\n        srcset=\"/static/3427d8d646cc9896c17d62eabd511d50/cf440/sample_app_02.png 148w,\n/static/3427d8d646cc9896c17d62eabd511d50/d2d38/sample_app_02.png 295w,\n/static/3427d8d646cc9896c17d62eabd511d50/b9e4f/sample_app_02.png 590w,\n/static/3427d8d646cc9896c17d62eabd511d50/f9b6a/sample_app_02.png 885w,\n/static/3427d8d646cc9896c17d62eabd511d50/2d849/sample_app_02.png 1180w,\n/static/3427d8d646cc9896c17d62eabd511d50/bbefa/sample_app_02.png 1770w,\n/static/3427d8d646cc9896c17d62eabd511d50/99445/sample_app_02.png 1908w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>자, 그럼 Menu1Component와 Menu2Component가 AppComponent의 menuSubTitle 필드로 데이터를 넣어줄 것인가?\n여러가지 방법이 있겠지만 service 클래스를 사용하여 문제 해결을 진행해보자.</p>\n<h4>4. 서브타이틀 문자열의 변화를 감지할 옵저버를 선언한다.</h4>\n<p>여기서는 Service 클래스를 사용하여 옵저버 역할을 하게 한다.</p>\n<!-- {% codeblock my-toolbar.service.ts %} -->\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable<span class=\"token punctuation\">,</span> EventEmitter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyToolbarService</span> <span class=\"token punctuation\">{</span>\n\n  subTitleChangeEvent<span class=\"token punctuation\">:</span> EventEmitter<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setSubTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">subTitle<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subTitleChangeEvent<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>subTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onChangeSubTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">handler<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subTitleChangeEvent<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>5. AppComponent에서는 subTitle의 변화가 있을 때 자신의 menuSubTitle 필드에 데이터를 바인딩한다.</h4>\n<p>이렇게 서브타이틀 변화에 대한 핸들러를 생성자에서 선언해준다. 이 핸들러에서는 서브타이틀 변화가 있을 때 마다 menuSubTitle 필드에 데이터를 바인딩하는 로직이 담겨 있다.\n실수하지 말아야 할 부분이 있는데 providers에 서브타이틀 이벤트 처리가 담긴 MyToolbarService 클래스를 선언해줘야지 정상적으로 이벤트 핸들링을 할 수 있게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>MyToolbarService<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./my-toolbar.service'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'app-root'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./app.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./app.component.css'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  providers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>MyToolbarService<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppComponent</span> <span class=\"token punctuation\">{</span>\n  menuSubTitle<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> myToolbarService<span class=\"token punctuation\">:</span> MyToolbarService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myToolbarService<span class=\"token punctuation\">.</span><span class=\"token function\">onChangeSubTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newMenuSubTitle</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>menuSubTitle <span class=\"token operator\">=</span> newMenuSubTitle<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>6. Menu1Comopnent와 Menu2Component에서는 서브타이틀 변경 이벤트 발생 로직을 작성한다.</h4>\n<p>Menu1Component에서는 아래와 같이 서브타이틀 값을 변경하면 앞에 선언한 서비스 코드에 나와 있다시피 서브타이틀 변경 이벤트가\n발생하게 된다. 그러면 AppComponent에서 이를 감지하여 AppComponent.menuSubTitle 필드에 변경된 값을 할당하게 될 것이고,\nAppComponent.menuSubTitle는 my-toolbar의 인풋 필드와 바인딩이 되어 있기 때문에 Menu1Component와 Menu2Component의 ngOnInit에서\nsetSubTitle 메소드를 실행하여 서브타이틀 값을 변경하면 툴바의 서브타이틀 부분이 갱신되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Output<span class=\"token punctuation\">,</span> Component<span class=\"token punctuation\">,</span> OnInit<span class=\"token punctuation\">,</span> EventEmitter<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>MyToolbarService<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../my-toolbar.service'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'app-menu1'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'./menu1.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./menu1.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Menu1Component</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> myToolbarService<span class=\"token punctuation\">:</span> MyToolbarService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myToolbarService<span class=\"token punctuation\">.</span><span class=\"token function\">setSubTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"menu1's subtitle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06a7c2a0729b45d4973721e28d929eab/f3d76/sample_app_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.3304535637149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABhElEQVQ4y6WTzU7CQBDH60WDR9/Ag/oUPgBeSGiMJ1/BN9AYT0D4uPAi+AbGA/KhQIGEakKorTSWllZCgdLtjrO1+EkiDf/k3+12Or/MTmY5DtUo3h7eV29OmtVqvCEIfKNe5zudDi+KIl+pVPharbbU7XabbzVbcVFoHpfL5aNC4XqL8TafhIeyZSnwKj2DLCsgSRJYlgXj8RgMw/Dff9s0TVBkGZQXBbqGDqL4+JbP53cZcLvb693Z9hSGpukOh0NP0zSPrZPJxHMcx5vNZj+8+IZgb6DrZDAagdrv6+l0ep8BI4qilFzXBdu2yXw+p/gzxSRKCKFsj7GlZnEGBwpgWpaezWb3/ApVVS0BCpMJhJfHHtPp1PgE4vFKQZBQSiGkfSC25wuIjfeBGCTBuh5wUeF34KpaCRhG/wJpeP0BRrCHxQDoBNAwdlkujpyWyWQ+KsSpF2BN4ezOcrncgX/1EonEKU75VTKZPE+lUhdhHORcYv5ZNBrd4WKxGBdoY037egewc3UxP2fNhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sample app 결과\"\n        title=\"\"\n        src=\"/static/06a7c2a0729b45d4973721e28d929eab/b9e4f/sample_app_03.png\"\n        srcset=\"/static/06a7c2a0729b45d4973721e28d929eab/cf440/sample_app_03.png 148w,\n/static/06a7c2a0729b45d4973721e28d929eab/d2d38/sample_app_03.png 295w,\n/static/06a7c2a0729b45d4973721e28d929eab/b9e4f/sample_app_03.png 590w,\n/static/06a7c2a0729b45d4973721e28d929eab/f9b6a/sample_app_03.png 885w,\n/static/06a7c2a0729b45d4973721e28d929eab/2d849/sample_app_03.png 1180w,\n/static/06a7c2a0729b45d4973721e28d929eab/bbefa/sample_app_03.png 1770w,\n/static/06a7c2a0729b45d4973721e28d929eab/f3d76/sample_app_03.png 1852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5eaf8f1548258b8f29bac2412280b68d/f3d76/sample_app_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.3304535637149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQ4y6WTTU7CQBTH60aDS2/gQj2FB8ANCY1x5RW8gca4AsLHhovgDYwLpKBAgYRqQqwdaSz9klD6Pc+ZpmIUEmn4J/95k3l5v0zevGEYom79/vixdXfWa7WyXZ5nO50OOxwOWUEQ2Gazybbb7ZUeDAZsv9fPCnzvlOO4k1rtdofytl/4J840EXyIbyBJCERRBNM0YTabgaZp0f6vDcMAJEmA3hGMNBUE4fmzWq3uU+Du6PX1wbJs0A3D13U9VBQlpNGyrNB13dBxnF/+PiPgcKKqwWQ6BXk8VovF4iEFphBCDd/3gQACz/OwbduYFOEgCLDne5jkVprmKRwwgGGaarlcPohuKMtyA2MMBBZAcoV0IZfQFkDSj0acDCg4oSPgfD7/AZLGR0CSDOK4GZA8wBJwXa0FTKJ/gTi5loAp0sN6DHRjaBL7tJaMnFIqlRavzMOGIoPuVCqVo+jr5XK5czLlN/l8/rJQKFwlcVxzTeov0un0HpPJZJhYWxs60heZU3UruQtHyQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sample app 결과\"\n        title=\"\"\n        src=\"/static/5eaf8f1548258b8f29bac2412280b68d/b9e4f/sample_app_04.png\"\n        srcset=\"/static/5eaf8f1548258b8f29bac2412280b68d/cf440/sample_app_04.png 148w,\n/static/5eaf8f1548258b8f29bac2412280b68d/d2d38/sample_app_04.png 295w,\n/static/5eaf8f1548258b8f29bac2412280b68d/b9e4f/sample_app_04.png 590w,\n/static/5eaf8f1548258b8f29bac2412280b68d/f9b6a/sample_app_04.png 885w,\n/static/5eaf8f1548258b8f29bac2412280b68d/2d849/sample_app_04.png 1180w,\n/static/5eaf8f1548258b8f29bac2412280b68d/bbefa/sample_app_04.png 1770w,\n/static/5eaf8f1548258b8f29bac2412280b68d/f3d76/sample_app_04.png 1852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4>전체 결과 소스코드</h4>\n<p><a href=\"https://github.com/icednut/angular2-exercise\">https://github.com/icednut/angular2-exercise</a></p>\n<p>위 방법이 정답이라 생각하지 않고 또 다른 효율적인 방법이 있을 것이라 생각한다. 일단 router-outlet 밑에서 동작하는 컴포넌트들에 대해\nAppComponent와 연결할 수 있는 마땅한 방법이 떠오르지 않아 서비스 클래스를 사용했지만, 좀 더 코드도 줄이면서 데이터 바인딩도 잘 될 수 있는\n효율적인 방법을 찾는 것에 대해 계속 노력해야겠다.</p>","frontmatter":{"title":"Angular 2 - 사례로 살펴보는 @Input과 @Output의 이해 1","date":"2016-12-09 00:00:00","tags":["angular2","input","output"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016/12/09/20161209-about_angular2_input_output/","previous":{"fields":{"slug":"/2016/12/09/20161209-d3_table_and_barchart/"},"frontmatter":{"title":"D3로 Table과 Bar Chart 표현하기"}},"next":{"fields":{"slug":"/2016/12/15/20161215-java_generics/"},"frontmatter":{"title":"Java Generics"}}}}