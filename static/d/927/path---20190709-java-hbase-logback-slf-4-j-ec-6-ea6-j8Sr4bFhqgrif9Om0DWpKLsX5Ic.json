{"data":{"site":{"siteMetadata":{"title":"Icednut's Notes","author":"Will Lee"}},"markdownRemark":{"id":"4cf3034e-a293-53a6-972e-346c8f90135a","excerpt":"이슈: hbase-client 디펜던시를 추가하면 로그가 안나옴최근 logback을 사용하고 있는 스칼라 Akka 프로젝트에서 hbase를 연동할 일이 있어서  디펜던시 추가 후 hbase…","html":"<h3>이슈: hbase-client 디펜던시를 추가하면 로그가 안나옴</h3>\n<p>최근 logback을 사용하고 있는 스칼라 Akka 프로젝트에서 hbase를 연동할 일이 있어서 <code class=\"language-text\">hbase-shaded-client</code> 디펜던시 추가 후 hbase 관련 데이터 조회 및 저장 작업을 진행하게 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"scala\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-scala line-numbers\"><code class=\"language-scala\"><span class=\"token comment\">// build.sbt</span>\nlibraryDependencies <span class=\"token operator\">++</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"ch.qos.logback\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"logback-classic\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"1.1.7\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token string\">\"org.apache.hbase\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"hbase-shaded-client\"</span> <span class=\"token operator\">%</span> hbaseClientVersion</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그런데 위 디펜던시를 추가한 순간 콘솔에 로그가 나오질 않았다. 정확하게는 logger로 출력한 내용은 나오질 않고 System.out.print로 출력한 코드만 나오고 있었다.\n<br/>\n<br/></p>\n<h3>해결</h3>\n<p>구글에서 좀 찾아보니 hbase-client 추가 후 로그가 안나올 경우 slf4j, log4j 디펜던시를 exclude 해보라는 글이 보였다. (<a href=\"https://kimfish.co.kr/285\">https://kimfish.co.kr/285</a>) 그래서 아래와 같이 slf4j와 log4j 디펜던시를 제외한 후 어플리케이션을 재시작해보니 로그가 정상적으로 나왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"scala\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-scala line-numbers\"><code class=\"language-scala\"><span class=\"token comment\">// build.sbt</span>\nlibraryDependencies <span class=\"token operator\">++</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"ch.qos.logback\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"logback-classic\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"1.1.7\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token string\">\"org.apache.hbase\"</span> <span class=\"token operator\">%</span> <span class=\"token string\">\"hbase-shaded-client\"</span> <span class=\"token operator\">%</span> hbaseClientVersion excludeAll<span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">    ExclusionRule<span class=\"token punctuation\">(</span>organization <span class=\"token operator\">=</span> <span class=\"token string\">\"org.slf4j\"</span><span class=\"token punctuation\">,</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"slf4j-log4j12\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    ExclusionRule<span class=\"token punctuation\">(</span>organization <span class=\"token operator\">=</span> <span class=\"token string\">\"log4j\"</span><span class=\"token punctuation\">,</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"log4j\"</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<br/>\n<h3>왜 그런걸까?</h3>\n<p>전에도 비슷한 경험(<a href=\"http://icednut.github.io/20160715-logback_and_slf4j/\">http://icednut.github.io/20160715-logback<em>and</em>slf4j/</a>)이 있었는데 그 때 해결만 하고 왜 그런건지 명확하게 밝히지 않고 넘어간 것이 새삼 아쉬웠다.\nLogback을 사용하고 있던 상황에서 왜 slf4j-log4j12와 log4j 디펜던시를 제거하니깐 로그가 나온걸까? 좀 더 세밀하게 분석해보자.\n는 다음 시간에…</p>","frontmatter":{"title":"Java Hbase-client 디펜던시 추가 후 로그가 제대로 안나오는 이슈 (with Slf4j, Logback)","date":"2019-07-09 21:13:01","tags":["java","logging","SLF4J","Logback"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/20190709-java-hbase-logback-slf4j/","previous":{"fields":{"slug":"/20190131-rxjava-infinite-iterable/"},"frontmatter":{"title":"RxJava를 이용하여 크기를 가늠할 수 없는 Iterable에서 데이터 읽고 처리하기"}},"next":null}}